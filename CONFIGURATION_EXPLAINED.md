# é…ç½®è¯´æ˜æ–‡æ¡£

## é¡¹ç›®é…ç½®è§£é‡Š

### ä¸ºä»€ä¹ˆ `public/` ç›®å½•éœ€è¦åŒ…å«åœ¨ Git ä¸­ï¼Ÿ

åœ¨æˆ‘ä»¬çš„ NAT64 å»¶è¿Ÿæµ‹è¯•å·¥å…·é¡¹ç›®ä¸­ï¼Œ`public/` ç›®å½•çš„ä½œç”¨ä¸ä¼ ç»Ÿçš„æ„å»ºè¾“å‡ºç›®å½•ä¸åŒï¼š

#### ğŸ” ä¼ ç»Ÿé¡¹ç›® vs æˆ‘ä»¬çš„é¡¹ç›®

**ä¼ ç»Ÿå‰ç«¯é¡¹ç›®**ï¼š
```
src/ (æºä»£ç )
  â”œâ”€â”€ components/
  â”œâ”€â”€ styles/
  â””â”€â”€ index.js
public/ (æ„å»ºè¾“å‡ºï¼Œç”±å·¥å…·ç”Ÿæˆ)
  â”œâ”€â”€ index.html
  â”œâ”€â”€ bundle.js
  â””â”€â”€ styles.css
```
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`public/` æ˜¯æ„å»ºå·¥å…·ç”Ÿæˆçš„ï¼Œåº”è¯¥è¢« `.gitignore` æ’é™¤ã€‚

**æˆ‘ä»¬çš„é¡¹ç›®**ï¼š
```
src/ (Worker ç‰ˆæœ¬æºä»£ç )
  â”œâ”€â”€ api/
  â”œâ”€â”€ services/
  â””â”€â”€ index.js
public/ (Pages ç‰ˆæœ¬çš„æºä»£ç )
  â”œâ”€â”€ index.html (æ‰‹å†™çš„é™æ€é¡µé¢)
  â”œâ”€â”€ css/styles.css (æ‰‹å†™çš„æ ·å¼)
  â””â”€â”€ js/app.js (æ‰‹å†™çš„å‰ç«¯é€»è¾‘)
functions/ (Pages Functions æºä»£ç )
  â””â”€â”€ api/
```

#### ğŸ“ æˆ‘ä»¬é¡¹ç›®ä¸­çš„ `public/` ç›®å½•

åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œ`public/` ç›®å½•åŒ…å«çš„æ˜¯ï¼š
- **æ‰‹å†™çš„æºä»£ç æ–‡ä»¶**ï¼Œä¸æ˜¯æ„å»ºè¾“å‡º
- **Cloudflare Pages éƒ¨ç½²æ‰€éœ€çš„é™æ€èµ„æº**
- **ä¸ `src/` ç›®å½•å¹³è¡Œçš„å¦ä¸€ç§éƒ¨ç½²æ–¹å¼çš„æºç **

### éƒ¨ç½²æ–¹å¼å¯¹åº”å…³ç³»

| éƒ¨ç½²æ–¹å¼ | ä½¿ç”¨çš„ç›®å½• | è¯´æ˜ |
|----------|------------|------|
| **Cloudflare Worker** | `src/` | æ¨¡å—åŒ–çš„ Worker ä»£ç  |
| **Cloudflare Pages** | `public/` + `functions/` | é™æ€æ–‡ä»¶ + Pages Functions |
| **å•æ–‡ä»¶ Worker** | `_worker.js` | åŸå§‹å•æ–‡ä»¶ç‰ˆæœ¬ |

### Cloudflare Pages é…ç½®è§£é‡Š

#### Build Output Directory: `public`

è¿™ä¸ªé…ç½®å‘Šè¯‰ Cloudflare Pagesï¼š
- åœ¨ `public/` ç›®å½•ä¸­æŸ¥æ‰¾é™æ€æ–‡ä»¶
- å°†è¿™äº›æ–‡ä»¶éƒ¨ç½²ä¸ºç½‘ç«™çš„æ ¹ç›®å½•
- `public/index.html` â†’ ç½‘ç«™é¦–é¡µ
- `public/css/styles.css` â†’ `/css/styles.css`
- `public/js/app.js` â†’ `/js/app.js`

#### Build Command: ç•™ç©º

æˆ‘ä»¬ä¸éœ€è¦æ„å»ºå‘½ä»¤ï¼Œå› ä¸ºï¼š
- `public/` ä¸­çš„æ–‡ä»¶å·²ç»æ˜¯æœ€ç»ˆå½¢æ€
- ä¸éœ€è¦ç¼–è¯‘ã€æ‰“åŒ…æˆ–è½¬æ¢
- ç›´æ¥éƒ¨ç½²å³å¯ä½¿ç”¨

### æ–‡ä»¶ç»“æ„è¯¦è§£

```
nat64-latency-test/
â”œâ”€â”€ src/                          # Worker éƒ¨ç½²ç‰ˆæœ¬
â”‚   â”œâ”€â”€ index.js                  # Worker å…¥å£
â”‚   â”œâ”€â”€ api/                      # API è·¯ç”±
â”‚   â”œâ”€â”€ services/                 # ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ views/index.html.js       # å†…åµŒ HTML ç”Ÿæˆå™¨
â”‚
â”œâ”€â”€ public/                       # Pages éƒ¨ç½²ç‰ˆæœ¬ï¼ˆé™æ€æ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ index.html                # é™æ€ HTML é¡µé¢
â”‚   â”œâ”€â”€ css/styles.css            # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ js/app.js                 # å‰ç«¯ JavaScript
â”‚
â”œâ”€â”€ functions/                    # Pages Functions
â”‚   â””â”€â”€ api/                      # API ç«¯ç‚¹
â”‚       â”œâ”€â”€ prefixes.js           # å‰ç¼€è·å– API
â”‚       â””â”€â”€ test.js               # æµ‹è¯• API
â”‚
â””â”€â”€ _worker.js                    # å•æ–‡ä»¶ç‰ˆæœ¬ï¼ˆå‘åå…¼å®¹ï¼‰
```

### ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ

#### 1. å¤šéƒ¨ç½²æ–¹å¼æ”¯æŒ
- **çµæ´»æ€§**ï¼šç”¨æˆ·å¯ä»¥é€‰æ‹©æœ€é€‚åˆçš„éƒ¨ç½²æ–¹å¼
- **å…¼å®¹æ€§**ï¼šä¿æŒå‘åå…¼å®¹ï¼Œæ”¯æŒåŸæœ‰çš„å•æ–‡ä»¶éƒ¨ç½²

#### 2. ä»£ç å¤ç”¨
- æ ¸å¿ƒé€»è¾‘åœ¨ä¸åŒç‰ˆæœ¬é—´å…±äº«
- å‡å°‘é‡å¤ä»£ç ï¼Œä¾¿äºç»´æŠ¤

#### 3. éƒ¨ç½²ç®€åŒ–
- Pages ç‰ˆæœ¬æ— éœ€æ„å»ºæ­¥éª¤
- ç›´æ¥éƒ¨ç½²é™æ€æ–‡ä»¶ï¼Œé€Ÿåº¦æ›´å¿«

### å¸¸è§è¯¯è§£æ¾„æ¸…

#### âŒ é”™è¯¯ç†è§£
"public/ æ˜¯æ„å»ºè¾“å‡ºç›®å½•ï¼Œåº”è¯¥è¢« .gitignore æ’é™¤"

#### âœ… æ­£ç¡®ç†è§£
"åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œpublic/ æ˜¯ Pages ç‰ˆæœ¬çš„æºä»£ç ç›®å½•ï¼Œéœ€è¦åŒ…å«åœ¨ Git ä¸­"

### éƒ¨ç½²éªŒè¯

éƒ¨ç½²åï¼Œæ‚¨å¯ä»¥éªŒè¯æ–‡ä»¶æ˜¯å¦æ­£ç¡®ï¼š

1. **æ£€æŸ¥é™æ€æ–‡ä»¶**ï¼š
   - è®¿é—® `https://your-site.pages.dev/` â†’ åº”è¯¥æ˜¾ç¤ºä¸»é¡µ
   - è®¿é—® `https://your-site.pages.dev/css/styles.css` â†’ åº”è¯¥æ˜¾ç¤ºæ ·å¼
   - è®¿é—® `https://your-site.pages.dev/js/app.js` â†’ åº”è¯¥æ˜¾ç¤º JavaScript

2. **æ£€æŸ¥ API ç«¯ç‚¹**ï¼š
   - è®¿é—® `https://your-site.pages.dev/api/prefixes` â†’ åº”è¯¥è¿”å› JSON æ•°æ®
   - è®¿é—® `https://your-site.pages.dev/api/test?prefix=xxx` â†’ åº”è¯¥æ‰§è¡Œæµ‹è¯•

### å¦‚æœæ‚¨æƒ³è¦ä¼ ç»Ÿçš„æ„å»ºæµç¨‹

å¦‚æœæ‚¨æ›´å–œæ¬¢ä¼ ç»Ÿçš„æ„å»ºæµç¨‹ï¼Œå¯ä»¥ï¼š

1. **å°† `public/` æ”¹ä¸º `dist/` æˆ– `build/`**
2. **æ·»åŠ æ„å»ºè„šæœ¬**å°†æºæ–‡ä»¶ç¼–è¯‘åˆ°è¾“å‡ºç›®å½•
3. **åœ¨ `.gitignore` ä¸­æ’é™¤è¾“å‡ºç›®å½•**
4. **åœ¨ Cloudflare Pages ä¸­è®¾ç½®æ„å»ºå‘½ä»¤**

ä½†å¯¹äºæˆ‘ä»¬è¿™ä¸ªé¡¹ç›®ï¼Œå½“å‰çš„è®¾è®¡æ›´ç®€å•ç›´æ¥ã€‚

### æ€»ç»“

- âœ… `public/` ç›®å½•åŒ…å« Pages ç‰ˆæœ¬çš„æºä»£ç ï¼Œéœ€è¦æäº¤åˆ° Git
- âœ… Cloudflare Pages ç›´æ¥ä½¿ç”¨ `public/` ä¸­çš„æ–‡ä»¶ï¼Œæ— éœ€æ„å»º
- âœ… è¿™ç§è®¾è®¡ç®€åŒ–äº†éƒ¨ç½²æµç¨‹ï¼Œæé«˜äº†å¯ç»´æŠ¤æ€§
- âœ… æ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼ï¼Œæ»¡è¶³ä¸åŒç”¨æˆ·éœ€æ±‚
